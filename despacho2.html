<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="productos.html">
    <link rel="stylesheet" href="admin.html">
    <link rel="stylesheet" href="user.html">
    <link rel="stylesheet" href="carrito.css">
    <script src="despacho.js"></script>
    <script src="index.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <title>AnimalShop</title>
</head>
<body>
    <header>
        <div class="container">
            <a href="#2">SOCIAL</a>
            <a href="#1">NOSOTROS</a>
        </div>
    </header>
    <nav>
        <div class="container">
            <a id="logo" class="text-light" href="user.html"><strong>Animal</strong><span>Shop</span></a>
            <form>
                <input type="search" name="" id="" placeholder="     Escribe el Producto">
                <button class="btn btn-outline-light" type="submit"><i class="bi bi-search"></i></button>
            </form>
            <a href="" data-bs-toggle="modal" data-bs-target="#cerrar-sesion">Cerrar Sesion</a>
            <a href="" data-bs-toggle="offcanvas" data-bs-target="#carrito" aria-controls="carrito" >Carrito</a>
        </div>
        
    </nav>
    <section>
        <div class="container">
            <form class="formulario" id="despacho">
                <div class="titulo">
                    <h1>Datos del despacho</h1>
                </div>
                <label>Nombre</label>
                <input type="text" class="form-control" id="name" placeholder="Ingrese su nombre" required>
                <label>Email</label>
                <input type="text" class="form-control" id="email" placeholder="Ingrese su correo" required>
                <label>Telefono</label>
                <input type="number" class="form-control" id="fono" placeholder="Ingrese su telefono" required>
                <label>Direccion</label>
                <input type="text" class="form-control " id="direccion" placeholder="Ingrese su direccion" required>
                <div class="direccion pt-2">
                    <select id="regiones" class="form-select">
                        <option active>Seleccione Region</option>
                    </select>
                    <select id="provincia" class="form-select">
                        <option active>Seleccione Provincia</option>
                    </select>
                    <select id="comunas" class="form-select">
                        <option active>Seleccione Comuna</option>
                    </select>
                </div>
            </form>
            <div class="mb-5  ">
                <a href="index.html" class=""><button type="button" id="envio" class="btn btn-danger">Cancelar</button></a>
                <button type="button" id="envio" class="btn btn-success" onclick="envio()">Finalizar</button>
            </div>
        </div>
    </section>
    
    <footer>
        <div class="container">
            <div id="2" class="social">
                <h5>NUESTRAS REDES SOCIALES</h5>
                <a href=""><i class="bi bi-whatsapp"></i></a>
                <a href=""><i class="bi bi-facebook"></i></a>
                <a href=""><i class="bi bi-envelope"></i></a>
            </div>   
            <div class="autor">
                <h6>©Creado por Jose Romero</h6>
            </div> 
        </div>
    </footer>


    <!-- Modal de cerrar sesion-->
    <div class="modal fade" id="cerrar-sesion">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5>Cerrar Sesion</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>¿Deseas Cerrar Sesion?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" data-bs-dismiss="modal">Volver</button>
                    <a href="index.html"><button type="button" class="btn">Cerrar Sesion</button></a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de suscripcion-->
    <div class="modal fade" id="suscripcion">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5>Suscribete</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h3>¡¡¡ SUSCRIBETE Y OBTEN UN 15% DE DESCUENTO !!!</h3>
                    <form class="formulario">
                        <form class="formulario">
                            <label>Mail o Rut</label>
                            <input type="email" id="correo2">
                        </form>     
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" data-bs-dismiss="modal">Volver</button>
                    <button type="button" class="btn" onclick="sub()">suscribirse</button>
                </div>
            </div>
        </div>
    </div>

    <!--Modal de carrito de compras-->
    <div class="offcanvas offcanvas-end" id="carrito">
        <div class="offcanvas-header">
            <h5 id="offcanvasRightLabel">Carrito de Compras</h5><!--para el titulo-->
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body"><!--para el body del carrito-->
            <div class="col">
                <div class="card">
                    <img id="img-card" src="img/identificador.png" class="card-img-top" alt="">
                    <div class="card-body">
                        <h5 class="card-title">Identificador</h5>
                        <p class="card-text">Para registrar a los Animales</p>
                        <p style="color: rgb(247, 0, 0);">$2.000</p>
                        <input type="number" placeholder="Cantidad" class="col-3">
                        <a href="despacho.html"><button type="button" class="btn btn-success">comprar</button></a><!--para comprarlo-->
                        <a href=""><button type="button" class="btn btn-danger">eliminar</button></a><!--para eliminar del carrito-->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        $.get("https://apis.digital.gob.cl/dpa/regiones", function (data) {
            $.each(data, function (i, data) {
                $("#regiones").append("<option value='" + data.codigo + "'>" + data.nombre + "</option>");
            });
        });

        $("#regiones").change(function () {
            $()
            $("#provincia").empty();
            $.get("https://apis.digital.gob.cl/dpa/regiones/" + $("#regiones").val() + "/provincias", function (data) {
                $.each(data, function (i, data) {
                    $("#provincia").append("<option value='" + data.codigo + "'>" + data.nombre + "</option>");
                });
            });
        });

        $("#provincia").change(function () {
            $("#comunas").empty();
            $.get("https://apis.digital.gob.cl/dpa/provincias/" + $("#provincia").val() + "/comunas", function (data) {
                $.each(data, function (i, data) {
                    $("#comunas").append("<option value='" + data.codigo + "'>" + data.nombre + "</option>");
                });
            });
        });
    </script>
    <script>
        //Creacion de objeto JSON
        var lista = [];

        //Agregar
        $("#btnAgregar").click(function () {
            //Declaracion y estructura JSON
            //var personaje <-- nombre variable que usaremos para almacenar el JSON
            //{} <--- Llave apertura y cierre JSON 
            // "primer valor" <-- Nombre que asignareoms para el atributo dentro del JSON
            // : <-- simbolo igual para JSON
            // "segundo valor" <-- es el valor el atributo dentro del JSON|
            var datos = {
                "nombre": "",
                "email": "",
                "telefono": "",
                "direccion": "",
                "region": "",
                "provincia":"",
                "comuna":""
            }

            datos.nombre = $("#name").val();
            datos.email = $("#email").val();
            datos.telefono = $('#fono').val();
            datos.direccion = $("#direccion").val();
            datos.region = $("#regiones").val();
            datos.provincia = $("#provincia").val();
            datos.comuna = $("#comunas").val();
            //console.log(datos);

            lista.push(datos);
        });

        //Listar
        $("#btnListar").click(function () {
            $("#tabla1").removeAttr("hidden");
            $("#datos").empty();

            $.each(lista, function (i, item) {
                $("#datos").append("<tr><td>" +
                    item.nombre + "</td><td>" +
                    item.email + "</td><td>" +
                    item.telefono + "</td><td>" +
                    item.direccion + "</td><td>" +
                    item.region + "</td><td>" +
                    item.provincia + "</td><td>" +
                    item.comuna + "</td><td>" 
                );
                console.log(item);
            });
        });

        //Limpiar Formulario
        $("#btnClean").click(function () {
            $("#tabla1").prop("hidden", true);
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>
</html>